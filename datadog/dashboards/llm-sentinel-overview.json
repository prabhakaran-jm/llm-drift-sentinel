{
  "title": "LLM Sentinel - Application Health Overview",
  "description": "Comprehensive monitoring dashboard for LLM Drift & Abuse Sentinel. Tracks request metrics, drift detection, safety scores, and system health.",
  "widgets": [
    {
      "id": 1,
      "definition": {
        "type": "timeseries",
        "title": "Request Rate & Error Rate",
        "requests": [
          {
            "q": "sum:llm.request.count{*}.as_rate()",
            "display_type": "line",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          },
          {
            "q": "sum:llm.error.count{*}.as_rate()",
            "display_type": "line",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          }
        ],
        "yaxis": {
          "label": "Requests/sec",
          "scale": "linear"
        }
      },
      "layout": {
        "x": 0,
        "y": 0,
        "width": 47,
        "height": 15
      }
    },
    {
      "id": 2,
      "definition": {
        "type": "timeseries",
        "title": "Latency Percentiles (p50, p95, p99)",
        "requests": [
          {
            "q": "avg:llm.latency_ms{*}.as_rate()",
            "display_type": "line",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          },
          {
            "q": "p95:llm.latency_ms{*}",
            "display_type": "line",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          },
          {
            "q": "p99:llm.latency_ms{*}",
            "display_type": "line",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          }
        ],
        "yaxis": {
          "label": "Latency (ms)",
          "scale": "linear"
        }
      },
      "layout": {
        "x": 47,
        "y": 0,
        "width": 47,
        "height": 15
      }
    },
    {
      "id": 3,
      "definition": {
        "type": "timeseries",
        "title": "Token Usage Over Time",
        "requests": [
          {
            "q": "sum:llm.tokens.input{*}.as_rate()",
            "display_type": "line",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          },
          {
            "q": "sum:llm.tokens.output{*}.as_rate()",
            "display_type": "line",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          },
          {
            "q": "sum:llm.tokens.total{*}.as_rate()",
            "display_type": "line",
            "style": {
              "palette": "dog_classic",
              "line_type": "dashed",
              "line_width": "normal"
            }
          }
        ],
        "yaxis": {
          "label": "Tokens/sec",
          "scale": "linear"
        }
      },
      "layout": {
        "x": 0,
        "y": 15,
        "width": 47,
        "height": 15
      }
    },
    {
      "id": 4,
      "definition": {
        "type": "timeseries",
        "title": "Cost Tracking (USD)",
        "requests": [
          {
            "q": "sum:llm.cost_usd{*}.as_rate()",
            "display_type": "line",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          }
        ],
        "yaxis": {
          "label": "USD/sec",
          "scale": "linear"
        }
      },
      "layout": {
        "x": 47,
        "y": 15,
        "width": 47,
        "height": 15
      }
    },
    {
      "id": 19,
      "definition": {
        "type": "timeseries",
        "title": "Cost Optimization - Monthly Estimates",
        "requests": [
          {
            "q": "avg:llm.cost.monthly_estimated{type:current}",
            "display_type": "line",
            "style": {
              "palette": "warm",
              "line_type": "solid",
              "line_width": "normal"
            }
          },
          {
            "q": "avg:llm.cost.monthly_estimated{type:projected}",
            "display_type": "line",
            "style": {
              "palette": "green",
              "line_type": "dashed",
              "line_width": "normal"
            }
          }
        ],
        "yaxis": {
          "label": "USD/month",
          "scale": "linear"
        }
      },
      "layout": {
        "x": 0,
        "y": 90,
        "width": 31,
        "height": 15
      }
    },
    {
      "id": 20,
      "definition": {
        "type": "query_value",
        "title": "Potential Monthly Savings",
        "requests": [
          {
            "q": "avg:llm.cost.monthly_estimated{type:current} - avg:llm.cost.monthly_estimated{type:projected}",
            "aggregator": "avg"
          }
        ],
        "precision": 2,
        "text_align": "center",
        "custom_unit": "USD",
        "autoscale": true
      },
      "layout": {
        "x": 31,
        "y": 90,
        "width": 15,
        "height": 15
      }
    },
    {
      "id": 21,
      "definition": {
        "type": "query_value",
        "title": "High-Priority Recommendations",
        "requests": [
          {
            "q": "sum:llm.cost.recommendations.count{priority:high}",
            "aggregator": "sum"
          }
        ],
        "precision": 0,
        "text_align": "center",
        "custom_unit": "recommendations"
      },
      "layout": {
        "x": 46,
        "y": 90,
        "width": 15,
        "height": 15
      }
    },
    {
      "id": 22,
      "definition": {
        "type": "timeseries",
        "title": "Cache Hit Rate",
        "requests": [
          {
            "q": "avg:llm.cache.hit_rate{*}",
            "display_type": "line",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          }
        ],
        "yaxis": {
          "label": "Hit Rate (0-1)",
          "scale": "linear",
          "min": "0",
          "max": "1"
        },
        "markers": [
          {
            "value": "0.5",
            "display_type": "warning dashed",
            "label": "Target: 50%"
          }
        ]
      },
      "layout": {
        "x": 61,
        "y": 90,
        "width": 33,
        "height": 15
      }
    },
    {
      "id": 24,
      "definition": {
        "type": "timeseries",
        "title": "Cache Hits & Misses",
        "requests": [
          {
            "q": "sum:llm.cache.hits{*}.as_rate()",
            "display_type": "line",
            "style": {
              "palette": "green",
              "line_type": "solid",
              "line_width": "normal"
            }
          },
          {
            "q": "sum:llm.cache.misses{*}.as_rate()",
            "display_type": "line",
            "style": {
              "palette": "orange",
              "line_type": "solid",
              "line_width": "normal"
            }
          }
        ],
        "yaxis": {
          "label": "Count/sec",
          "scale": "linear"
        }
      },
      "layout": {
        "x": 0,
        "y": 120,
        "width": 47,
        "height": 15
      }
    },
    {
      "id": 25,
      "definition": {
        "type": "query_value",
        "title": "Cache Size",
        "requests": [
          {
            "q": "avg:llm.cache.size{*}",
            "aggregator": "avg"
          }
        ],
        "precision": 0,
        "text_align": "center",
        "custom_unit": "entries"
      },
      "layout": {
        "x": 47,
        "y": 120,
        "width": 15,
        "height": 15
      }
    },
    {
      "id": 23,
      "definition": {
        "type": "toplist",
        "title": "Top Cost Savings Recommendations",
        "requests": [
          {
            "q": "sum:llm.cost.recommendation.savings{*} by {recommendation_type,model,alternative_model}"
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 105,
        "width": 47,
        "height": 15
      }
    },
    {
      "id": 5,
      "definition": {
        "type": "timeseries",
        "title": "Drift Score Trends",
        "requests": [
          {
            "q": "avg:llm.drift_score{baseline_ready:true}",
            "display_type": "line",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          },
          {
            "q": "max:llm.drift_score{baseline_ready:true}",
            "display_type": "line",
            "style": {
              "palette": "warm",
              "line_type": "dashed",
              "line_width": "normal"
            }
          }
        ],
        "yaxis": {
          "label": "Drift Score (0-1)",
          "scale": "linear",
          "min": "0",
          "max": "1"
        },
        "markers": [
          {
            "value": "0.2",
            "display_type": "error dashed",
            "label": "Warning Threshold"
          },
          {
            "value": "0.4",
            "display_type": "error solid",
            "label": "Critical Threshold"
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 30,
        "width": 47,
        "height": 15
      }
    },
    {
      "id": 6,
      "definition": {
        "type": "timeseries",
        "title": "Safety Score Distribution",
        "requests": [
          {
            "q": "avg:llm.safety.score{*}",
            "display_type": "line",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          },
          {
            "q": "min:llm.safety.score{*}",
            "display_type": "line",
            "style": {
              "palette": "warm",
              "line_type": "dashed",
              "line_width": "normal"
            }
          }
        ],
        "yaxis": {
          "label": "Safety Score (0-1)",
          "scale": "linear",
          "min": "0",
          "max": "1"
        },
        "markers": [
          {
            "value": "0.5",
            "display_type": "warning dashed",
            "label": "Warning Threshold"
          },
          {
            "value": "0.3",
            "display_type": "error solid",
            "label": "Critical Threshold"
          }
        ]
      },
      "layout": {
        "x": 47,
        "y": 30,
        "width": 47,
        "height": 15
      }
    },
    {
      "id": 7,
      "definition": {
        "type": "query_value",
        "title": "Total Requests (Last Hour)",
        "requests": [
          {
            "q": "sum:llm.request.count{*}.as_count()",
            "aggregator": "sum"
          }
        ],
        "precision": 0,
        "text_align": "center",
        "custom_unit": "requests"
      },
      "layout": {
        "x": 0,
        "y": 45,
        "width": 15,
        "height": 15
      }
    },
    {
      "id": 8,
      "definition": {
        "type": "query_value",
        "title": "Error Rate (Last Hour)",
        "requests": [
          {
            "q": "sum:llm.error.count{*}.as_count()",
            "aggregator": "sum"
          }
        ],
        "precision": 2,
        "text_align": "center",
        "custom_unit": "errors"
      },
      "layout": {
        "x": 15,
        "y": 45,
        "width": 15,
        "height": 15
      }
    },
    {
      "id": 9,
      "definition": {
        "type": "query_value",
        "title": "Avg Latency (p50)",
        "requests": [
          {
            "q": "avg:llm.latency_ms{*}",
            "aggregator": "avg"
          }
        ],
        "precision": 0,
        "text_align": "center",
        "custom_unit": "ms"
      },
      "layout": {
        "x": 30,
        "y": 45,
        "width": 15,
        "height": 15
      }
    },
    {
      "id": 10,
      "definition": {
        "type": "query_value",
        "title": "Avg Drift Score",
        "requests": [
          {
            "q": "avg:llm.drift_score{baseline_ready:true}",
            "aggregator": "avg"
          }
        ],
        "precision": 3,
        "text_align": "center"
      },
      "layout": {
        "x": 45,
        "y": 45,
        "width": 15,
        "height": 15
      }
    },
    {
      "id": 11,
      "definition": {
        "type": "query_value",
        "title": "Avg Safety Score",
        "requests": [
          {
            "q": "avg:llm.safety.score{*}",
            "aggregator": "avg"
          }
        ],
        "precision": 3,
        "text_align": "center"
      },
      "layout": {
        "x": 60,
        "y": 45,
        "width": 15,
        "height": 15
      }
    },
    {
      "id": 16,
      "definition": {
        "type": "timeseries",
        "title": "Anomaly Detection - Z-Score Trends",
        "requests": [
          {
            "q": "avg:llm.drift.z_score{*}",
            "display_type": "line",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          },
          {
            "q": "max:llm.drift.z_score{*}",
            "display_type": "line",
            "style": {
              "palette": "warm",
              "line_type": "dashed",
              "line_width": "normal"
            }
          }
        ],
        "yaxis": {
          "label": "Z-Score (std dev)",
          "scale": "linear"
        },
        "markers": [
          {
            "value": "3",
            "display_type": "error dashed",
            "label": "Anomaly Threshold (3Ïƒ)"
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 60,
        "width": 47,
        "height": 15
      }
    },
    {
      "id": 17,
      "definition": {
        "type": "query_value",
        "title": "Anomalies Detected (Last Hour)",
        "requests": [
          {
            "q": "sum:llm.drift.anomaly{*}.as_count()",
            "aggregator": "sum"
          }
        ],
        "precision": 0,
        "text_align": "center",
        "custom_unit": "anomalies"
      },
      "layout": {
        "x": 47,
        "y": 60,
        "width": 15,
        "height": 15
      }
    },
    {
      "id": 12,
      "definition": {
        "type": "toplist",
        "title": "Safety Events by Label",
        "requests": [
          {
            "q": "sum:llm.safety.event.count{*} by {safety_label}"
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 75,
        "width": 31,
        "height": 15
      }
    },
    {
      "id": 18,
      "definition": {
        "type": "timeseries",
        "title": "Anomaly Rate Over Time",
        "requests": [
          {
            "q": "sum:llm.drift.anomaly{*}.as_rate()",
            "display_type": "line",
            "style": {
              "palette": "warm",
              "line_type": "solid",
              "line_width": "normal"
            }
          }
        ],
        "yaxis": {
          "label": "Anomalies/sec",
          "scale": "linear"
        }
      },
      "layout": {
        "x": 62,
        "y": 60,
        "width": 32,
        "height": 15
      }
    },
    {
      "id": 13,
      "definition": {
        "type": "toplist",
        "title": "Requests by Model",
        "requests": [
          {
            "q": "sum:llm.request.count{*} by {model}"
          }
        ]
      },
      "layout": {
        "x": 31,
        "y": 75,
        "width": 31,
        "height": 15
      }
    },
    {
      "id": 14,
      "definition": {
        "type": "alert_graph",
        "title": "Active Alerts",
        "alert_id": "monitor_alert_id",
        "viz_type": "timeseries"
      },
      "layout": {
        "x": 62,
        "y": 75,
        "width": 32,
        "height": 15
      }
    },
    {
      "id": 15,
      "definition": {
        "type": "event_stream",
        "title": "Safety Events Stream",
        "query": "source:sentinel",
        "event_size": "l",
        "tags_execution": "and"
      },
      "layout": {
        "x": 47,
        "y": 105,
        "width": 47,
        "height": 20
      }
    }
  ],
  "template_variables": [
    {
      "name": "env",
      "default": "*",
      "prefix": "env"
    },
    {
      "name": "service",
      "default": "*",
      "prefix": "service"
    },
    {
      "name": "model",
      "default": "*",
      "prefix": "model"
    }
  ],
  "layout_type": "free",
  "notify_list": []
}

